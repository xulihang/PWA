<!-- This WebApp/WebSite was created using BANano v1.27, a B4X library written by Alain Bailleul (2018 - 2019). -->
/* Mustache */(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}function primitiveHasOwnProperty(primitive,propName){return primitive!=null&&typeof primitive!=="object"&&primitive.hasOwnProperty&&primitive.hasOwnProperty(propName)}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,intermediateValue,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){intermediateValue=context.view;names=name.split(".");index=0;while(intermediateValue!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(intermediateValue,names[index])||primitiveHasOwnProperty(intermediateValue,names[index]);intermediateValue=intermediateValue[names[index++]]}}else{intermediateValue=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit){value=intermediateValue;break}context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var cacheKey=template+":"+(tags||mustache.tags).join(":");var tokens=cache[cacheKey];if(tokens==null)tokens=cache[cacheKey]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials,tags){var tokens=this.parse(template,tags);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="3.0.0";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials,tags){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials,tags)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;return mustache});/* Umbrella (modified by Alain Bailleul) */var u=function(t,e){return this instanceof u?t instanceof u?t:("string"==typeof t&&(t=this.select(t,e)),t&&t.nodeName&&(t=[t]),void(this.nodes=this.slice(t))):new u(t,e)};u.prototype={get length(){return this.nodes.length}},u.prototype.nodes=[],u.prototype.addClass=function(){return this.eacharg(arguments,function(t,e){t.classList.add(e)})},u.prototype.adjacent=function(i,t,n){return"number"==typeof t&&(t=0===t?[]:new Array(t).join().split(",").map(Number.call,Number)),this.each(function(r,o){var e=document.createDocumentFragment();u(t||{}).map(function(t,e){var n="function"==typeof i?i.call(this,t,e,r,o):i;return"string"==typeof n?this.generate(n):u(n)}).each(function(t){this.isInPage(t)?e.appendChild(u(t).clone().first()):e.appendChild(t)}),n.call(this,r,e)})},u.prototype.after=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t.nextSibling)})},u.prototype.append=function(t,e){return this.adjacent(t,e,function(t,e){t.appendChild(e)})},u.prototype.args=function(t,e,n){return"function"==typeof t&&(t=t(e,n)),"string"!=typeof t&&(t=this.slice(t).map(this.str(e,n))),t.toString().split(/[\s,]+/).filter(function(t){return t.length})},u.prototype.array=function(o){o=o;var i=this;return this.nodes.reduce(function(t,e,n){var r;return o?((r=o.call(i,e,n))||(r=!1),"string"==typeof r&&(r=u(r)),r instanceof u&&(r=r.nodes)):r=e.innerHTML,t.concat(!1!==r?r:[])},[])},u.prototype.attr=function(t,e,r){return r=r?"data-":"",this.pairs(t,e,function(t,e){return t.getAttribute(r+e)},function(t,e,n){t.setAttribute(r+e,n)})},u.prototype.before=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t)})},u.prototype.children=function(t){return this.map(function(t){return this.slice(t.children)}).filter(t)},u.prototype.clone=function(){return this.map(function(t,e){var n=t.cloneNode(!0),r=this.getAll(n);return this.getAll(t).each(function(t,e){for(var n in this.mirror)this.mirror[n]&&this.mirror[n](t,r.nodes[e])}),n})},u.prototype.toU=function(){for(var t=[],e=0;e<this.nodes.length;e++)t.push(u(this.nodes[e]));return t},u.prototype.css=function(t,e){return this.pairs(t,e,function(t,e){return getStyle(t,e)},function(t,e,n){setStyle(t,e,n)})},u.prototype.getAll=function(t){return u([t].concat(u("*",t).nodes))},u.prototype.mirror={},u.prototype.mirror.events=function(t,e){if(t._e)for(var n in t._e)t._e[n].forEach(function(t){u(e).on(n,t)})},u.prototype.mirror.select=function(t,e){u(t).is("select")&&(e.value=t.value)},u.prototype.mirror.textarea=function(t,e){u(t).is("textarea")&&(e.value=t.value)},u.prototype.closest=function(e){return this.map(function(t){do{if(u(t).is(e))return t}while((t=t.parentNode)&&t!==document)})},u.prototype.data=function(t,e){return this.attr(t,e,!0)},u.prototype.each=function(t){return this.nodes.forEach(t.bind(this)),this},u.prototype.eacharg=function(n,r){return this.each(function(e,t){this.args(n,e,t).forEach(function(t){r.call(this,e,t)},this)})},u.prototype.empty=function(){return this.each(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})},u.prototype.filter=function(e){var t=function(t){return t.matches=t.matches||t.msMatchesSelector||t.webkitMatchesSelector,t.matches(e||"*")};return"function"==typeof e&&(t=e),e instanceof u&&(t=function(t){return-1!==e.nodes.indexOf(t)}),u(this.nodes.filter(t))},u.prototype.find=function(e){return this.map(function(t){return u(e||"*",t)})},u.prototype.first=function(){return this.nodes[0]||!1},u.prototype.bananofirst=function(){return u(this.nodes[0])||!1},u.prototype.generate=function(t){return/^\s*<tr[> ]/.test(t)?u(document.createElement("table")).html(t).children().children().nodes:/^\s*<t(h|d)[> ]/.test(t)?u(document.createElement("table")).html(t).children().children().children().nodes:/^\s*</.test(t)?u(document.createElement("div")).html(t).children().nodes:document.createTextNode(t)},u.prototype.handle=function(){var t=this.slice(arguments).map(function(e){return"function"==typeof e?function(t){t.preventDefault(),e.apply(this,arguments)}:e},this);return this.on.apply(this,t)},u.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},u.prototype.html=function(e){return void 0===e?this.first().innerHTML||"":this.each(function(t){t.innerHTML=e})},u.prototype.is=function(t){return 0<this.filter(t).length},u.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},u.prototype.bananolastlast=function(){return u(this.nodes[this.length-1])||!1},u.prototype.last=function(){return this.nodes[this.length-1]||!1},u.prototype.map=function(t){return t?u(this.array(t)).unique():this},u.prototype.not=function(e){return this.filter(function(t){return!u(t).is(e||!0)})},u.prototype.off=function(t){return this.eacharg(t,function(e,n){u(e._e?e._e[n]:[]).each(function(t){e.removeEventListener(n,t)})})},u.prototype.on=function(t,e,r){if("string"==typeof e){var o=e;e=function(e){var n=arguments;u(e.currentTarget).find(o).each(function(t){if(t===e.target||t.contains(e.target)){try{Object.defineProperty(e,"currentTarget",{get:function(){return t}})}catch(t){}r.apply(t,n)}})}}var n=function(t){return e.apply(this,[t].concat(t.detail||[]))};return this.eacharg(t,function(t,e){t.addEventListener(e,n),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push(n)})},u.prototype.pairs=function(n,t,e,r){if(void 0!==t){var o=n;(n={})[o]=t}return"object"==typeof n?this.each(function(t){for(var e in n)r(t,e,n[e])}):this.length?e(this.first(),n):""},u.prototype.param=function(e){return Object.keys(e).map(function(t){return this.uri(t)+"="+this.uri(e[t])}.bind(this)).join("&")},u.prototype.parent=function(t){return this.map(function(t){return t.parentNode}).filter(t)},u.prototype.prepend=function(t,e){return this.adjacent(t,e,function(t,e){t.insertBefore(e,t.firstChild)})},u.prototype.remove=function(){return this.each(function(t){t.parentNode&&t.parentNode.removeChild(t)})},u.prototype.removeClass=function(){return this.eacharg(arguments,function(t,e){t.classList.remove(e)})},u.prototype.replace=function(t,e){var n=[];return this.adjacent(t,e,function(t,e){n=n.concat(this.slice(e.children)),t.parentNode.replaceChild(e,t)}),u(n)},u.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},u.prototype.select=function(t,e){return t=t.replace(/^\s*/,"").replace(/\s*$/,""),/^</.test(t)?u().generate(t):(e||document).querySelectorAll(t)},u.prototype.serialize=function(){var r=this;return this.slice(this.first().elements).reduce(function(e,n){return!n.name||n.disabled||"file"===n.type?e:/(checkbox|radio)/.test(n.type)&&!n.checked?e:"select-multiple"===n.type?(u(n.options).each(function(t){t.selected&&(e+="&"+r.uri(n.name)+"="+r.uri(t.value))}),e):e+"&"+r.uri(n.name)+"="+r.uri(n.value)},"").slice(1)},u.prototype.siblings=function(t){return this.parent().children(t).not(this)},u.prototype.size=function(){return this.first().getBoundingClientRect()},u.prototype.hasAttr=function(t){return null!=this.attr(t)},u.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t.nodes||t):[t]:[]},u.prototype.str=function(e,n){return function(t){return"function"==typeof t?t.call(this,e,n):t.toString()}},u.prototype.text=function(e){return void 0===e?this.first().textContent||"":this.each(function(t){t.textContent=e})},u.prototype.toggleClass=function(t,e){return!!e===e?this[e?"addClass":"removeClass"](t):this.eacharg(t,function(t,e){t.classList.toggle(e)})},u.prototype.trigger=function(t){var o=this.slice(arguments).slice(1);return this.eacharg(t,function(t,e){var n,r={bubbles:!0,cancelable:!0,detail:o};try{n=new window.CustomEvent(e,r)}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,o)}t.dispatchEvent(n)})},u.prototype.checked=function (bool) {if (bool === undefined) {return this.checked().value || false;} return this.each(function (node) {node.checked = bool;});},u.prototype.value=function (text) {if (text === undefined) {return this.first().value || '';} return this.each(function (node) {node.value = text;});},u.prototype.unique=function(){return u(this.nodes.reduce(function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t},[]))},u.prototype.uri=function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},u.prototype.wrap=function(t){return this.map(function(e){return u(t).each(function(t){(function(t){for(;t.firstElementChild;)t=t.firstElementChild;return u(t)})(t).append(e.cloneNode(!0)),e.parentNode.replaceChild(t,e)})})},"object"==typeof module&&module.exports&&(module.exports=u,module.exports.u=u);/* Vault */!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t:e.vault=t()}(this,function(){"use strict";var e=window.localStorage;return{set:function(t,n){t&&void 0!==n&&(e[t]=JSON.stringify(n))},get:function(t){var n=e[t];return void 0!==n?JSON.parse(n):void 0},remove:function(t){e.hasOwnProperty(t)&&delete e[t]},empty:function(){e.clear()}}});/* MQTT */"undefined"==typeof Paho&&(Paho={}),Paho.MQTT=function(r){function d(e,t,s){return t[s++]=e>>8,t[s++]=e%256,s}function l(e,t,s,i){return a(e,s,i=d(t,s,i)),i+t}function u(e){for(var t=0,s=0;s<e.length;s++){var i=e.charCodeAt(s);2047<i?(55296<=i&&i<=56319&&(s++,t++),t+=3):127<i?t+=2:t++}return t}function a(e,t,s){for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);if(55296<=n&&n<=56319){var o=e.charCodeAt(++i);if(isNaN(o))throw Error(E(y.MALFORMED_UNICODE,[n,o]));n=o-56320+(n-55296<<10)+65536}n<=127?t[s++]=n:(n<=2047?t[s++]=n>>6&31|192:(n<=65535?t[s++]=n>>12&15|224:(t[s++]=n>>18&7|240,t[s++]=n>>12&63|128),t[s++]=n>>6&63|128),t[s++]=63&n|128)}return t}function M(e,t,s){for(var i,n="",o=t;o<t+s;){if(!((i=e[o++])<128)){var r=e[o++]-128;if(r<0)throw Error(E(y.MALFORMED_UTF,[i.toString(16),r.toString(16),""]));if(i<224)i=64*(i-192)+r;else{var a=e[o++]-128;if(a<0)throw Error(E(y.MALFORMED_UTF,[i.toString(16),r.toString(16),a.toString(16)]));if(i<240)i=4096*(i-224)+64*r+a;else{var c=e[o++]-128;if(c<0)throw Error(E(y.MALFORMED_UTF,[i.toString(16),r.toString(16),a.toString(16),c.toString(16)]));if(!(i<248))throw Error(E(y.MALFORMED_UTF,[i.toString(16),r.toString(16),a.toString(16),c.toString(16)]));i=262144*(i-240)+4096*r+64*a+c}}}65535<i&&(i-=65536,n+=String.fromCharCode(55296+(i>>10)),i=56320+(1023&i)),n+=String.fromCharCode(i)}return n}var h=function(e,t){for(var s in e)if(e.hasOwnProperty(s)){if(!t.hasOwnProperty(s)){var i="Unknown property, "+s+". Valid properties are:";for(s in t)t.hasOwnProperty(s)&&(i=i+" "+s);throw Error(i)}if(typeof e[s]!==t[s])throw Error(E(y.INVALID_TYPE,[typeof e[s],s]))}},t=function(e,t){return function(){return e.apply(t,arguments)}},y={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},c={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},E=function(e,t){var s=e.text;if(t)for(var i,n,o=0;o<t.length;o++)if(i="{"+o+"}",0<(n=s.indexOf(i))){var r=s.substring(0,n);s=s.substring(n+i.length),s=r+t[o]+s}return s},f=[0,6,77,81,73,115,100,112,3],g=[0,4,77,81,84,84,4],v=function(e,t){for(var s in this.type=e,t)t.hasOwnProperty(s)&&(this[s]=t[s])},s=function(e,t,s){this._client=e,this._window=t,this._keepAliveInterval=1e3*s,this.isReset=!1;var i=new v(12).encode(),n=function(e){return function(){return o.apply(e)}},o=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(i),this.timeout=this._window.setTimeout(n(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(y.PING_TIMEOUT.code,E(y.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),0<this._keepAliveInterval&&(this.timeout=setTimeout(n(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},i=function(e,t,s,i,n){var o,r,a;this._window=t,s||(s=30),this.timeout=setTimeout((o=i,r=e,a=n,function(){return o.apply(r,a)}),1e3*s),this.cancel=function(){this._window.clearTimeout(this.timeout)}},_=function(e,t,s,i,n){if(!("WebSocket"in r&&null!==r.WebSocket))throw Error(E(y.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in r&&null!==r.localStorage))throw Error(E(y.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in r&&null!==r.ArrayBuffer))throw Error(E(y.UNSUPPORTED,["ArrayBuffer"]));for(var o in this._trace("Paho.MQTT.Client",e,t,s,i,n),this.host=t,this.port=s,this.path=i,this.uri=e,this.clientId=n,this._localKey=t+":"+s+("/mqtt"!=i?":"+i:"")+":"+n+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,localStorage)0!=o.indexOf("Sent:"+this._localKey)&&0!=o.indexOf("Received:"+this._localKey)||this.restore(o)};_.prototype.connected=!(v.prototype.encode=function(){var e=(15&this.type)<<4,t=0,s=[],i=0;switch(null!=this.messageIdentifier&&(t+=2),this.type){case 1:switch(this.mqttVersion){case 3:t+=f.length+3;break;case 4:t+=g.length+3}if(t+=u(this.clientId)+2,null!=this.willMessage){t=t+(u(this.willMessage.destinationName)+2);var n=this.willMessage.payloadBytes;n instanceof Uint8Array||(n=new Uint8Array(r)),t+=n.byteLength+2}null!=this.userName&&(t+=u(this.userName)+2),null!=this.password&&(t+=u(this.password)+2);break;case 8:e=2|e;for(var o=0;o<this.topics.length;o++)s[o]=u(this.topics[o]),t+=s[o]+2;t+=this.requestedQos.length;break;case 10:for(e|=2,o=0;o<this.topics.length;o++)s[o]=u(this.topics[o]),t+=s[o]+2;break;case 6:e|=2;break;case 3:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1);i=u(this.payloadMessage.destinationName);var r=this.payloadMessage.payloadBytes;t=t+(i+2)+r.byteLength;r instanceof ArrayBuffer?r=new Uint8Array(r):r instanceof Uint8Array||(r=new Uint8Array(r.buffer))}var a=t,c=(o=Array(1),0);do{var h=a%128;0<(a=a>>7)&&(h|=128),o[c++]=h}while(0<a&&c<4);if(a=o.length+1,t=new ArrayBuffer(t+a),(c=new Uint8Array(t))[0]=e,c.set(o,1),3==this.type)a=l(this.payloadMessage.destinationName,i,c,a);else if(1==this.type){switch(this.mqttVersion){case 3:c.set(f,a),a+=f.length;break;case 4:c.set(g,a),a+=g.length}e=0,this.cleanSession&&(e=2),null!=this.willMessage&&(e=4|e|this.willMessage.qos<<3,this.willMessage.retained&&(e|=32)),null!=this.userName&&(e|=128),null!=this.password&&(e|=64),c[a++]=e,a=d(this.keepAliveInterval,c,a)}switch(null!=this.messageIdentifier&&(a=d(this.messageIdentifier,c,a)),this.type){case 1:a=l(this.clientId,u(this.clientId),c,a),null!=this.willMessage&&(a=l(this.willMessage.destinationName,u(this.willMessage.destinationName),c,a),a=d(n.byteLength,c,a),c.set(n,a),a+=n.byteLength),null!=this.userName&&(a=l(this.userName,u(this.userName),c,a)),null!=this.password&&l(this.password,u(this.password),c,a);break;case 3:c.set(r,a);break;case 8:for(o=0;o<this.topics.length;o++)a=l(this.topics[o],s[o],c,a),c[a++]=this.requestedQos[o];break;case 10:for(o=0;o<this.topics.length;o++)a=l(this.topics[o],s[o],c,a)}return t}),_.prototype.maxMessageIdentifier=65536,_.prototype._msg_queue=null,_.prototype.sendPinger=null,_.prototype.receivePinger=null,_.prototype.receiveBuffer=null,_.prototype._traceBuffer=null,_.prototype._MAX_TRACE_ENTRIES=100,_.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw Error(E(y.INVALID_STATE,["already connected"]));if(this.socket)throw Error(E(y.INVALID_STATE,["already connected"]));(this.connectOptions=e).uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},_.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw Error(E(y.INVALID_STATE,["not connected"]));var s=new v(8);s.topics=[e],s.requestedQos=null!=t.qos?[t.qos]:[0],t.onSuccess&&(s.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(s.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(s.timeOut=new i(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:y.SUBSCRIBE_TIMEOUT.code,errorMessage:E(y.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(s),this._schedule_message(s)},_.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw Error(E(y.INVALID_STATE,["not connected"]));var s=new v(10);s.topics=[e],t.onSuccess&&(s.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(s.timeOut=new i(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:y.UNSUBSCRIBE_TIMEOUT.code,errorMessage:E(y.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(s),this._schedule_message(s)},_.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw Error(E(y.INVALID_STATE,["not connected"]));wireMessage=new v(3),0<(wireMessage.payloadMessage=e).qos?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage)),this._schedule_message(wireMessage)},_.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw Error(E(y.INVALID_STATE,["not connecting or connected"]));wireMessage=new v(14),this._notify_msg_sent[wireMessage]=t(this._disconnected,this),this._schedule_message(wireMessage)},_.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},_.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@")},_.prototype.stopTrace=function(){delete this._traceBuffer},_.prototype._doConnect=function(e){this.connectOptions.useSSL&&((e=e.split(":"))[0]="wss",e=e.join(":")),this.connected=!1,this.socket=this.connectOptions.mqttVersion<4?new WebSocket(e,["mqttv3.1"]):new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=t(this._on_socket_open,this),this.socket.onmessage=t(this._on_socket_message,this),this.socket.onerror=t(this._on_socket_error,this),this.socket.onclose=t(this._on_socket_close,this),this.sendPinger=new s(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new s(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new i(this,window,this.connectOptions.timeout,this._disconnected,[y.CONNECT_TIMEOUT.code,E(y.CONNECT_TIMEOUT)])},_.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},_.prototype.store=function(e,t){var s={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case 3:t.pubRecReceived&&(s.pubRecReceived=!0),s.payloadMessage={};for(var i="",n=t.payloadMessage.payloadBytes,o=0;o<n.length;o++)i=n[o]<=15?i+"0"+n[o].toString(16):i+n[o].toString(16);s.payloadMessage.payloadHex=i,s.payloadMessage.qos=t.payloadMessage.qos,s.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(s.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(s.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),s.sequence=t.sequence);break;default:throw Error(E(y.INVALID_STORED_DATA,[key,s]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(s))},_.prototype.restore=function(e){var t=localStorage.getItem(e),s=JSON.parse(t),i=new v(s.type,s);switch(s.type){case 3:t=s.payloadMessage.payloadHex;for(var n=new ArrayBuffer(t.length/2),o=(n=new Uint8Array(n),0);2<=t.length;){var r=parseInt(t.substring(0,2),16);t=t.substring(2,t.length);n[o++]=r}(t=new Paho.MQTT.Message(n)).qos=s.payloadMessage.qos,t.destinationName=s.payloadMessage.destinationName,s.payloadMessage.duplicate&&(t.duplicate=!0),s.payloadMessage.retained&&(t.retained=!0),i.payloadMessage=t;break;default:throw Error(E(y.INVALID_STORED_DATA,[e,t]))}0==e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},_.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},_.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,3===(this._sentMessages[e.messageIdentifier]=e).type&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},_.prototype._on_socket_open=function(){var e=new v(1,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},_.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data),this.receivePinger.reset(),e=this._deframeMessages(e.data);for(var t=0;t<e.length;t+=1)this._handleMessage(e[t])},_.prototype._deframeMessages=function(e){(e=new Uint8Array(e),this.receiveBuffer)&&((t=new Uint8Array(this.receiveBuffer.length+e.length)).set(this.receiveBuffer),t.set(e,this.receiveBuffer.length),e=t,delete this.receiveBuffer);try{for(var t=0,s=[];t<e.length;){var i;e:{var n=e,o=h=t,r=n[h],a=r>>4,c=15&r,h=h+1,d=void 0,l=0,u=1;do{if(h==n.length){i=[null,o];break e}l+=(127&(d=n[h++]))*u,u*=128}while(0!=(128&d));if((d=h+l)>n.length)i=[null,o];else{var f=new v(a);switch(a){case 2:1&n[h++]&&(f.sessionPresent=!0),f.returnCode=n[h++];break;case 3:o=c>>1&3;var g=256*n[h]+n[h+1],_=M(n,h=h+2,g);h=h+g;0<o&&(f.messageIdentifier=256*n[h]+n[h+1],h+=2);var p=new Paho.MQTT.Message(n.subarray(h,d));1==(1&c)&&(p.retained=!0),8==(8&c)&&(p.duplicate=!0),p.qos=o,p.destinationName=_,f.payloadMessage=p;break;case 4:case 5:case 6:case 7:case 11:f.messageIdentifier=256*n[h]+n[h+1];break;case 9:f.messageIdentifier=256*n[h]+n[h+1],h+=2,f.returnCode=n.subarray(h,d)}i=[f,d]}}var I=i[0];t=i[1];if(null===I)break;s.push(I)}t<e.length&&(this.receiveBuffer=e.subarray(t))}catch(e){return void this._disconnected(y.INTERNAL_ERROR.code,E(y.INTERNAL_ERROR,[e.message,e.stack.toString()]))}return s},_.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case 2:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var s=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+s.messageIdentifier)}for(t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(y.CONNACK_RETURNCODE.code,E(y.CONNACK_RETURNCODE,[e.returnCode,c[e.returnCode]]));break}for(var n in this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length),e=[],this._sentMessages)this._sentMessages.hasOwnProperty(n)&&e.push(this._sentMessages[n]);e=e.sort(function(e,t){return e.sequence-t.sequence}),n=0;for(var o=e.length;n<o;n++)if(3==(s=e[n]).type&&s.pubRecReceived){var r=new v(6,{messageIdentifier:s.messageIdentifier});this._schedule_message(r)}else this._schedule_message(s);this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case 3:this._receivePublish(e);break;case 4:(s=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage));break;case 5:(s=this._sentMessages[e.messageIdentifier])&&(s.pubRecReceived=!0,r=new v(6,{messageIdentifier:e.messageIdentifier}),this.store("Sent:",s),this._schedule_message(r));break;case 6:i=this._receivedMessages[e.messageIdentifier],localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var a=new v(7,{messageIdentifier:e.messageIdentifier});this._schedule_message(a);break;case 7:s=this._sentMessages[e.messageIdentifier],delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(s.payloadMessage);break;case 9:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),e.returnCode.indexOf=Array.prototype.indexOf,-1!==e.returnCode.indexOf(128)?s.onFailure&&s.onFailure(e.returnCode):s.onSuccess&&s.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case 11:(s=this._sentMessages[e.messageIdentifier])&&(s.timeOut&&s.timeOut.cancel(),s.callback&&s.callback(),delete this._sentMessages[e.messageIdentifier]);break;case 13:this.sendPinger.reset();break;case 14:this._disconnected(y.INVALID_MQTT_MESSAGE_TYPE.code,E(y.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(y.INVALID_MQTT_MESSAGE_TYPE.code,E(y.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){this._disconnected(y.INTERNAL_ERROR.code,E(y.INTERNAL_ERROR,[e.message,e.stack.toString()]))}},_.prototype._on_socket_error=function(e){this._disconnected(y.SOCKET_ERROR.code,E(y.SOCKET_ERROR,[e.data]))},_.prototype._on_socket_close=function(){this._disconnected(y.SOCKET_CLOSE.code,E(y.SOCKET_CLOSE))},_.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},_.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new v(4,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e),e=new v(5,{messageIdentifier:e.messageIdentifier}),this._schedule_message(e);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},_.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},_.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=y.OK.code,t=E(y.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},_.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)void 0!==arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));e=Array.prototype.slice.call(arguments).join(""),this.traceFunction({severity:"Debug",message:e})}if(null!==this._traceBuffer){e=0;for(var t=arguments.length;e<t;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):void 0===arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))}},_.prototype._traceMask=function(e,t){var s,i={};for(s in e)e.hasOwnProperty(s)&&(i[s]=s==t?"******":e[s]);return i};var e=function(e,t,n,s){var o;if("string"!=typeof e)throw Error(E(y.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){s=t;var i=(o=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!i)throw Error(E(y.INVALID_ARGUMENT,[e,"host"]));e=i[4]||i[2],t=parseInt(i[7]),n=i[8]}else{if(3==arguments.length&&(s=n,n="/mqtt"),"number"!=typeof t||t<0)throw Error(E(y.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw Error(E(y.INVALID_TYPE,[typeof n,"path"]));o="ws://"+(-1!=e.indexOf(":")&&"["!=e.slice(0,1)&&"]"!=e.slice(-1)?"["+e+"]":e)+":"+t+n}for(var r=i=0;r<s.length;r++){var a=s.charCodeAt(r);55296<=a&&a<=56319&&r++,i++}if("string"!=typeof s||65535<i)throw Error(E(y.INVALID_ARGUMENT,[s,"clientId"]));var c=new _(o,e,t,n,s);this._getHost=function(){return e},this._setHost=function(){throw Error(E(y.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw Error(E(y.UNSUPPORTED_OPERATION))},this._getPath=function(){return n},this._setPath=function(){throw Error(E(y.UNSUPPORTED_OPERATION))},this._getURI=function(){return o},this._setURI=function(){throw Error(E(y.UNSUPPORTED_OPERATION))},this._getClientId=function(){return c.clientId},this._setClientId=function(){throw Error(E(y.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return c.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw Error(E(y.INVALID_TYPE,[typeof e,"onConnectionLost"]));c.onConnectionLost=e},this._getOnMessageDelivered=function(){return c.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw Error(E(y.INVALID_TYPE,[typeof e,"onMessageDelivered"]));c.onMessageDelivered=e},this._getOnMessageArrived=function(){return c.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw Error(E(y.INVALID_TYPE,[typeof e,"onMessageArrived"]));c.onMessageArrived=e},this._getTrace=function(){return c.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw Error(E(y.INVALID_TYPE,[typeof e,"onTrace"]));c.traceFunction=e},this.connect=function(e){if(h(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),4<e.mqttVersion||e.mqttVersion<3)throw Error(E(y.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw Error(E(y.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof p))throw Error(E(y.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,void 0===e.willMessage.destinationName)throw Error(E(y.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw Error(E(y.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw Error(E(y.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,s=0;s<e.hosts.length;s++){if("string"!=typeof e.hosts[s])throw Error(E(y.INVALID_TYPE,[typeof e.hosts[s],"connectOptions.hosts["+s+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[s])){if(0==s)t=!0;else if(!t)throw Error(E(y.INVALID_ARGUMENT,[e.hosts[s],"connectOptions.hosts["+s+"]"]))}else if(t)throw Error(E(y.INVALID_ARGUMENT,[e.hosts[s],"connectOptions.hosts["+s+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw Error(E(y.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw Error(E(y.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw Error(E(y.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],s=0;s<e.hosts.length;s++){if("number"!=typeof e.ports[s]||e.ports[s]<0)throw Error(E(y.INVALID_TYPE,[typeof e.ports[s],"connectOptions.ports["+s+"]"]));t=e.hosts[s];var i=e.ports[s];o="ws://"+(-1!=t.indexOf(":")?"["+t+"]":t)+":"+i+n,e.uris.push(o)}}}c.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw Error("Invalid argument:"+e);if(h(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw Error(E(y.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));c.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw Error("Invalid argument:"+e);if(h(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw Error("unsubscribeOptions.timeout specified with no onFailure callback.");c.unsubscribe(e,t)},this.send=function(e,t,s,i){var n;if(0==arguments.length)throw Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof p)&&"string"!=typeof e)throw Error("Invalid argument:"+typeof e);if(void 0===(n=e).destinationName)throw Error(E(y.INVALID_ARGUMENT,[n.destinationName,"Message.destinationName"]))}else(n=new p(t)).destinationName=e,3<=arguments.length&&(n.qos=s),4<=arguments.length&&(n.retained=i);c.send(n)},this.disconnect=function(){c.disconnect()},this.getTraceLog=function(){return c.getTraceLog()},this.startTrace=function(){c.startTrace()},this.stopTrace=function(){c.stopTrace()},this.isConnected=function(){return c.connected}};e.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var p=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw E(y.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:M(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(u(t));e=new Uint8Array(e);return a(t,e,0),e}return t};var s=void 0;this._getDestinationName=function(){return s},this._setDestinationName=function(e){if("string"!=typeof e)throw Error(E(y.INVALID_ARGUMENT,[e,"newDestinationName"]));s=e};var i=0;this._getQos=function(){return i};var n=!(this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw Error("Invalid argument:"+e);i=e});this._getRetained=function(){return n};var o=!(this._setRetained=function(e){if("boolean"!=typeof e)throw Error(E(y.INVALID_ARGUMENT,[e,"newRetained"]));n=e});this._getDuplicate=function(){return o},this._setDuplicate=function(e){o=e}};return p.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:e,Message:p}}(window);/* BANano jCore */var bananoglobal=this;var DateTime;const sleep = (milliseconds) => {return new Promise(resolve => setTimeout(resolve, milliseconds))};function BANAnoMethodVarsToMap(m,b,n) {if (b) {m['subname']=n;}return m;};function BANanoExec(functionName, context, args) {var args = Array.prototype.slice.call(arguments, 2);var namespaces = functionName.split('.');var func = namespaces.pop();for(var i = 0; i < namespaces.length; i++) {context = context[namespaces[i]];}return context[func].apply(context, args);};async function BananoSQLOpen(db) {var res = alasql.promise("CREATE INDEXEDDB DATABASE IF NOT EXISTS " + db + ";").then(function(res){return res;}).catch(function(reason){console.log(reason);return -1;});return res;};async function BananoSQLRunExecute(sql, args, db) {if (args == null) {var res = alasql.promise("ATTACH INDEXEDDB DATABASE " + db + ";USE " + db + ";" + sql).then(function(res){return res[2];}).catch(function(reason){console.log(reason);return null;});return res;} else {var res = alasql.promise("ATTACH INDEXEDDB DATABASE " + db + ";USE " + db + ";" + sql, args).then(function(res){return res[2];}).catch(function(reason) {console.log(reason);return null;});return res;}};function banano_isconnected(tag, returnMethod, obj) {var img = document.createElement('img');img.onerror = function() {obj[returnMethod](tag, false);};img.onload = function() {obj[returnMethod](tag, true);};img.src = 'http://gorgeousapps.com/donotdelete.gif?rand=' +((new Date()).getTime());}async function banano_isconnectedWait() {return new Promise(function (resolve, reject) {var img = document.createElement('img');img.onerror = function() {resolve(false);};img.onload = function() {resolve(true);};img.src = 'http://gorgeousapps.com/donotdelete.gif?rand=' +((new Date()).getTime());})};function setStyle(el, property, value) {el.style[property] = value;}function getStyle(el, property) {var style = window.getComputedStyle ? getComputedStyle(el, null) : el.currentStyle;return style[property];}(function () {var DateFormat = "MM/dd/yyyy";var TimeFormat = "HH:mm:ss";var _TZOffset = new Date().getTimezoneOffset()*-1/60;var self = this;var DateTime = {DateParse: function(s) {var ddres = Date.parse(s);return DateTime.WithTZ(ddres).getTime();},TimeParse: function(s) {var dd = new Date();s = dd.format('yyyy-MM-dd') + ' ' + s;var ddres = Date.parse(s);return DateTime.WithTZ(ddres).getTime();},Date: function(n) {var ddres = DateTime.WithTZ(n);return ddres.format(DateFormat);},Time: function(n) {var ddres = DateTime.WithTZ(n);return ddres.format(TimeFormat);},GetDateFormat: function() {return DateFormat;},SetDateFormat: function(s) {DateFormat=s;},GetTimeFormat: function() {return TimeFormat;},SetTimeFormat: function(s) {TimeFormat=s;},Add: function(dd, y, m, d) {var ddres = DateTime.WithTZ(dd);var res = DateTime.InnerAdd(ddres, y, 'y');res = DateTime.InnerAdd(res, m, 'm');res = DateTime.InnerAdd(res, d, 'd');return res.getTime();},InnerAdd: function(d, c, t){c = (c === undefined) ? 0 : c;var result = null;switch(t){case 'mill':result = new Date(d.setMilliseconds(d.getMilliseconds()+c));break;case 's':result = new Date(d.setSeconds(d.getSeconds()+c));break;case 'min':result = new Date(d.setMinutes(d.getMinutes()+c));break;case 'h':result = new Date(d.setHours(d.getHours()+c));break;case 'd':result = new Date(d.setDate(d.getDate()+c));break;case 'm':result = new Date(d.setMonth(d.getMonth()+c));break;case 'y':result = new Date(d.setFullYear(d.getFullYear()+c));break;default:console.error("[timeSolver.js] Input Type Error");break;}return result;},WithTZ: function(n) {if (_TZOffset!=new Date().getTimezoneOffset()*-1/60) {var d = DateTime.InnerAdd(new Date(n),new Date(n).getTimezoneOffset()/60, 'h');d = DateTime.InnerAdd(d, _TZOffset, 'h');return d;} else {return new Date(n);}},Now: function() {return new Date().getTime();},		GetYear: function(n) {return DateTime.WithTZ(new Date(n)).getFullYear();},GetMonth: function(n) {return DateTime.WithTZ(new Date(n)).getMonth()+1;},GetDayOfMonth: function(n) {return DateTime.WithTZ(new Date(n)).getDate();},GetDayOfYear: function(n) {var t = new Date(n);var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];var mn = t.getMonth();var dn = t.getDate();var dayOfYear = dayCount[mn] + dn;var year = t.getFullYear();var isLeap=false;if((year & 3) != 0) {isLeap=false;} else {isLeap = ((year % 100) != 0 || (year % 400) == 0);}if(mn > 1 && isLeap) dayOfYear++;return dayOfYear;},GetDayOfWeek: function(n) {return DateTime.WithTZ(new Date(n)).getDay()+1;},GetHour: function(n) {return DateTime.WithTZ(new Date(n)).getHours();},GetMinute: function(n) {return DateTime.WithTZ(new Date(n)).getMinutes();},GetSecond: function(n) {return DateTime.WithTZ(new Date(n)).getSeconds();},GetTimeZoneOffsetAt: function(n) {if (_TZOffset!=new Date().getTimezoneOffset()*-1/60) {return _TZOffset;} else {return new Date(n).getTimezoneOffset()*-1/60;}},GetWeekInYear: function(n) {var onejan = new Date(n.getFullYear(), 0, 1);return Math.ceil( (((n - onejan) / 86400000) + onejan.getDay() + 1) / 7 );},GetWeekInMonth: function(n, exact) {var month = n.getMonth(), year = n.getFullYear(), firstWeekday = new Date(year, month, 1).getDay(), lastDateOfMonth = new Date(year, month + 1, 0).getDate(), offsetDate = n.getDate() + firstWeekday - 1, index = 1, weeksInMonth = index + Math.ceil((lastDateOfMonth + firstWeekday - 7) / 7), week = index + Math.floor(offsetDate / 7);if (exact || week < 2 + index) return week;return week === weeksInMonth ? index + 5 : week;},TicksPerDay: function() {return 86400000;},TicksPerHour: function() {return 3600000;},TicksPerMinute: function() {return 60000;},TicksPerSecond: function() {return 1000;},TimeZoneOffset: function() {return _TZOffset;},SetTimeZone: function(n) {_TZOffset = n;}};	if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {module.exports = DateTime;} else {if (typeof window !== 'undefined') {window.DateTime = DateTime;} else {bananoglobal.DateTime = DateTime;}}})();var dateFormat = function () {var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip = /[^-+\dA-Z]/g,pad = function (val, len) {val = String(val);len = len || 2;while (val.length < len) val = "0" + val;return val;};return function (date, mask, utc) {var dF = dateFormat;if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {mask = date;date = undefined;}date = date ? new Date(date) : new Date;if (isNaN(date)) throw SyntaxError("invalid date");if (mask.slice(0, 4) == "UTC:") {mask = mask.slice(4);utc = true;}var	_ = utc ? "getUTC" : "get",d = date[_ + "Date"](),D = date[_ + "Day"](),m = date[_ + "Month"](),y = date[_ + "FullYear"](),H = date[_ + "Hours"](),M = date[_ + "Minutes"](),s = date[_ + "Seconds"](),L = date[_ + "Milliseconds"](),o = utc ? 0 : date.getTimezoneOffset(),DD = DateTime.GetDayOfYear(date),w = DateTime.GetWeekInYear(date),W = DateTime.GetWeekInMonth(date, true),flags = {d: d,dd: pad(d),E: dF.i18n.dayNames[D],EE: dF.i18n.dayNames[D + 7],M: m + 1,MM: pad(m + 1),MMM: dF.i18n.monthNames[m],MMMM: dF.i18n.monthNames[m + 12],yy: String(y).slice(2),yyyy: y,h: H % 12 || 12,K: pad(H % 12 || 12),H: H,HH: pad(H),m: M,mm: pad(M),s: s,ss: pad(s),S: pad(L > 99 ? Math.round(L / 10) : L),a: H < 12 ? "AM" : "PM",Z: utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),z: utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),X: utc ? "UTC" : (String(date).match(timezone) || [""]).pop().replace(timezoneClip, ""),o: (o > 0 ? "-" : "+") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),u: D,D: DD,w: w,W: W};return mask.replace(token, function ($0) {return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);});};}();dateFormat.i18n = {dayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat","Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],monthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec","January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]};Date.prototype.format = function (mask, utc) {return dateFormat(this, mask, utc);};String.prototype.equalsIgnoreCase = function(otherString) {return (this.toUpperCase().localeCompare(otherString.toUpperCase())===0);};String.prototype.contains = function(otherString) {return (this.indexOf(otherString)>-1);};String.prototype.getBytes = function() {var utf8 = [];var str = this;for (var i=0; i < str.length; i++) {var charcode = str.charCodeAt(i);if (charcode < 0x80) utf8.push(charcode);else if (charcode < 0x800) {utf8.push(0xffffffc0 | (charcode >> 6), 0xffffff80 | (charcode & 0x3f));} else if (charcode < 0xd800 || charcode >= 0xe000) {utf8.push(0xffffffe0 | (charcode >> 12), 0xffffff80 | ((charcode>>6) & 0x3f), 0xffffff80 | (charcode & 0x3f));} else {utf8.push(0xef, 0xbf, 0xbd);}}return utf8;};function banano_bytesToString(array) {var str = '',i;var data = new Uint8Array(array);for (i = 0; i < data.length; i++) {var value = data[i];if (value < 0x80) {str += String.fromCharCode(value);} else if (value > 0xBF && value < 0xE0) {str += String.fromCharCode((value & 0x1F) << 6 | data[i + 1] & 0x3F);i += 1;} else if (value > 0xDF && value < 0xF0) {str += String.fromCharCode((value & 0x0F) << 12 | (data[i + 1] & 0x3F) << 6 | data[i + 2] & 0x3F);i += 2;}}return str;};function banano_getB4JKeyAt(outof, index) {var getkeyatkeycounter=0;for (var getkeyatkey in outof) {if (outof.hasOwnProperty(getkeyatkey)) {if (getkeyatkeycounter==index) {return getkeyatkey;}getkeyatkeycounter++;}}return '';};function banano_getB4JValueAt(outof, index) {var getkeyatkeycounter=0;for (var getkeyatkey in outof) {if (outof.hasOwnProperty(getkeyatkey)) {if (getkeyatkeycounter==index) {return outof[getkeyatkey];}getkeyatkeycounter++;}}return '';};function StringBuilder() {this.strings = new Array("");};StringBuilder.prototype.append = function (value) {var self=this;if (value) {this.strings.push(value);}return self;};StringBuilder.prototype.insert = function (offset, value) {var self=this;var str = this.strings.join("");this.strings = new Array("");this.strings.push([str.slice(0, offset), value, str.slice(offset)].join(''));return self;};StringBuilder.prototype.remove = function (startoffset, endoffset) {var self=this;var str = this.strings.join("");this.strings = new Array("");this.strings.push([str.slice(0, startoffset), str.slice(endoffset)].join(''));return self;};StringBuilder.prototype.length = function() {return this.strings.join("").length;};StringBuilder.prototype.toString = function () {return this.strings.join("");};function Param(obj) {if (typeof (obj) === 'string' || Object.prototype.toString.call(obj) === '[object FormData]') return obj;if (/application\/json/i.test(settings.headers['Content-type']) || Object.prototype.toString.call(obj) === '[object Array]') return JSON.stringify(obj);var encoded = [];for (var prop in obj) {if (obj.hasOwnProperty(prop)) {encoded.push(encodeURIComponent(prop) + '=' + encodeURIComponent(obj[prop]));}}return encoded.join('&');};function callAjax(url, type, dataType, data, uniqueid, withCredentials, returnMethod, obj, headers) {var xmlhttp = new XMLHttpRequest();xmlhttp.onreadystatechange = function() {if (xmlhttp.readyState == XMLHttpRequest.DONE) {if (xmlhttp.status >= 200 && xmlhttp.status < 300) {var res = '';var result = xmlhttp.responseText;res = result;obj[xmlhttp.returnMethod](true, xmlhttp.uniqueid, res);} else {obj[xmlhttp.returnMethod](false, xmlhttp.uniqueid, '');}}};xmlhttp.uniqueid = uniqueid;xmlhttp.returnMethod=returnMethod;var returnType='';if (dataType.indexOf('json')>-1) {returnType='json';}xmlhttp.returnType = returnType;xmlhttp.open(type, url, true);if (withCredentials) {xmlhttp.withCredentials=withCredentials;}for (var key in headers) {xmlhttp.setRequestHeader(key, headers[key]);}xmlhttp.send(Param(data));};async function callAjaxWait(url, type, dataType, data, withCredentials, headers) {return new Promise(function (resolve, reject) {var xmlhttp = new XMLHttpRequest();xmlhttp.onreadystatechange = function() {if (xmlhttp.readyState == XMLHttpRequest.DONE) {if (xmlhttp.status >= 200 && xmlhttp.status < 300) {var res = '';var result = xmlhttp.responseText;res = result;resolve(res);} else {resolve("");}}};var returnType='';if (dataType.indexOf('json')>-1) {returnType='json';}xmlhttp.returnType = returnType;xmlhttp.open(type, url, true);if (withCredentials) {xmlhttp.withCredentials=withCredentials;}for (var key in headers) {xmlhttp.setRequestHeader(key, headers[key]);}xmlhttp.send(Param(data));})};var _banano_bananodemo = new banano_bananodemo();var _banano_bananodemo_shared = new banano_bananodemo_shared();var _banano_bananodemo_minicss = new banano_bananodemo_minicss();function banano_bananodemo_myfirstclass() {var self;this._mysecond= new banano_bananodemo_mysecondclass();this._a=0;this.initialize= function(_name) {if (self==null) self=this;var _i;var _v;var _v2;console.log(_name);self._a = 5;self._mysecond.initialize("test param");for (_i=1;_i<=10;_i++) {console.log("MyFirstClass: Hello World "+_i+"!");}self._mysecond.runme("Alain");console.log(self._a);console.log(_banano_bananodemo._mainvar);console.log(self._mysecond.chaintest("Hello").chaintest(" ").chaintest("Wordl!").getchainstring());console.log(self._mysecond.chaintest(" ").chaintest("Hello").chaintest(" ").chaintest("Wordl!").getchainstring().toLowerCase());console.log(self._mysecond.getchainstring());console.log(self._mysecond.getchainstring().toLowerCase());_v=self._mysecond.getchainstring();console.log(_v);_v2=self._mysecond.getchainstring().toLowerCase();console.log(_v2);};}function banano_bananodemo_mysecondclass() {var self;this._sharedvar="SharedVar from class";this._lbltimer=null;this.__lbltimer={};this._lbltimetimer=null;this.__lbltimetimer={};this._mystring='';this._tokm=1.609344;this._tomiles=0.8684;this._chainstring='';this.initialize= function(_param) {if (self==null) self=this;console.log(_param);console.log(_banano_bananodemo_shared._sharedvar);};this.runme= function(_name) {if (self==null) self=this;var _myname;var _mydate;var _mytime;var _mystring;var _sb;_myname="Alain";self._mystring = "Hello planet \"B4X\"! This is a test \n    from " + _myname + " and " + _name + "";console.log(self._mystring);console.log("myString.Contains('planet'): "+self._mystring.contains("planet"));console.log(self._mystring.substring(0,5)+Math.max(1,2)+" after");_mydate=DateTime.Date(DateTime.Now());_mytime=DateTime.Time(DateTime.Now());_mystring="Here is the current date: " + _mydate + " and the current time: " + _mytime + "";console.log(_mystring);_sb=new StringBuilder();_sb.isinitialized=true;_sb.append("0123456789").append("\n").append("0123456789");console.log("sb.ToString: "+_sb.toString());console.log("Length: "+_sb.length());_sb.insert(2, "X");console.log("sb.ToString: "+_sb.toString());_sb.remove(2, 3);console.log("sb.ToString: "+_sb.toString());console.log(BANanoExec("evaluate", window, "10 * 20"));self.testjson();banano_isconnected("ForAjaxCall",'banano_isconnectedresult', this);self.__lbltimer.eventname="lbltimer";self.__lbltimer.interval=5000;self.__lbltimer.enabled=false;self.__lbltimer.isinitialized=true;self.__lbltimer.enabled=true;self._lbltimer=setInterval(self.lbltimer_tick, self.__lbltimer.interval);self.__lbltimetimer.eventname="lbltimetimer";self.__lbltimetimer.interval=1000;self.__lbltimetimer.enabled=false;self.__lbltimetimer.isinitialized=true;self.__lbltimetimer.enabled=true;self._lbltimetimer=setInterval(self.lbltimetimer_tick, self.__lbltimetimer.interval);};this.banano_isconnectedresult= function(_tag,_result) {if (self==null) self=this;var _headers;console.log("Internet for: "+_tag+" = "+_result);switch ("" + _tag) {case "" + "ForAjaxCall":if (_result) {_headers={};_headers["Content-Type"]="application/json";callAjax("https://reqres.in/api/users?page=2","GET","jsonp", "","ID0001", false, 'banano_callajaxresult', this, _headers);} else {_banano_bananodemo_minicss.content("#r4c1","contajax","Cannot make Ajax call because you are not connected to the internet, but here is the last result:<br>"+_banano_bananodemo_shared._ajaxresult);}break;}};this.banano_callajaxresult= function(_success,_uniqueid,_result) {if (self==null) self=this;console.log(_success);console.log(_uniqueid);console.log(_result);_banano_bananodemo_shared._ajaxresult = _result;_banano_bananodemo_minicss.content("#r4c1","contajax",_result);};this.lbltimer_tick= function() {if (self==null) self=this;console.log("Distance Ypres to Brugge: "+self.calcdistance("K"));self.__lbltimer.enabled=false;if (self._lbltimer) {clearInterval(self._lbltimer);self._lbltimer=null;}};this.lbltimetimer_tick= function() {if (self==null) self=this;var _mytime;_mytime=DateTime.Time(DateTime.Now());u("#r1c2").html(Mustache.render("Current time: {{time}}",JSON.parse("{\"time\": \"" + _mytime + "\"}")));};this.calcdistance= function(_unit) {if (self==null) self=this;var _theta;var _distance;var _lat1;_theta=0;_distance=5;console.log(Math.max(Math.min(10,15),Math.min(20,30)));_lat1=0;_lat1=0;_lat1=0;_lat1=0;_lat1 = 50.85;%lat2%;%lon1%;%lon2%;_theta = %lon1%;_distance = (Math.sin(self.deg2rad(_lat1)))*(Math.sin(self.deg2rad(%lat2%)));console.log("Distance = "+_distance);_distance = (Math.acos(_distance));_distance = self.rad2deg(_distance);console.log("Distance = "+_distance);_distance = _distance*60*1.1515;switch ("" + _unit.toUpperCase()) {case "" + "K":case "" + "Z":return "The distance is "+(_distance*self._tokm)+" kilometers!";case "" + "N":return "The distance is "+(_distance*self._tomiles)+" miles!";default:return "No idea what you are doing :-)";}};this.deg2rad= function(_deg) {if (self==null) self=this;return _deg*Math.PI/180;};this.rad2deg= function(_rad) {if (self==null) self=this;return _rad*180/Math.PI;};this.testjson= function() {if (self==null) self=this;var _json;var _map1;var _m;var _menuitems;var _i;var _data;var _jsongenerator;_json={};_json=JSON.parse("{\"menu\": {   \"id\": \"file\",   \"value\": \"File\",   \"popup\": {     \"menuitem\": [       {\"value\": \"New\", \"onclick\": \"CreateNewDoc()\"},       {\"value\": \"Open\", \"onclick\": \"OpenDoc()\"},       {\"value\": \"Close\", \"onclick\": \"CloseDoc()\"}     ]   } }}");_map1={};_map1 = _json;_m={};_menuitems=[];_m = _map1["menu"];_m = _m["popup"];_menuitems = _m["menuitem"];for (_i=0;_i<=_menuitems.length-1;_i++) {_m = _menuitems[_i];console.log(_m["value"]);}_data=[];_data.push(1);_data.push(2);_data.push(3);_data.splice(5,0,["1","2","3"]);_data.push(_map1);_jsongenerator={};_jsongenerator=_data;console.log(JSON.stringify(_jsongenerator, null, 2));vault.set("myjson1",_jsongenerator);console.log(vault.get("myjson1"));vault.remove("myjson1");vault.set("myjson2",JSON.parse("{\"value\": \"test 1\"}"));console.log(vault.get("myjson2"));vault.remove("myjson2");vault.set("myjson3","test 2");console.log(vault.get("myjson3"));vault.remove("myjson3");};this.chaintest= function(_toadd) {if (self==null) self=this;self._chainstring = self._chainstring+_toadd;return self;};this.getchainstring= function() {if (self==null) self=this;return self._chainstring;};}function banano_bananodemo_shared() {var self;this._sharedvar="Hello from shared";this._ajaxresult='';this.runme= function() {if (self==null) self=this;console.log(_banano_bananodemo._mainvar);};}function banano_bananodemo_row() {var self;this._id='';this._cols=[];this.initialize= function(_mid) {if (self==null) self=this;self._id = _mid;};}function banano_bananodemo_col() {var self;this._id='';this._classes='';this.initialize= function(_mid,_mclasses) {if (self==null) self=this;self._id = _mid;self._classes = _mclasses;};}function banano_bananodemo_minicss() {var self;this.addrows= function(_rowidprefix,_rows) {if (self==null) self=this;var _l;var _i;var _myrow;_l=[];for (_i=1;_i<=_rows;_i++) {_myrow= new banano_bananodemo_row();_myrow.initialize(_rowidprefix.toLowerCase()+_i);_l.push(_myrow);}return _l;};this.addcolumns= function(_cellidprefix,_therow,_cells,_classes) {if (self==null) self=this;var _i;var _mycol;for (_i=1;_i<=_cells;_i++) {_mycol= new banano_bananodemo_col();_mycol.initialize(_therow._id+_cellidprefix.toLowerCase()+_i,_classes);_therow._cols.push(_mycol);}};this.buildgrid= function(_targetid,_rows) {if (self==null) self=this;var _grid;var _i;var _myrow;var _j;var _mycol;_grid=new StringBuilder();_grid.isinitialized=true;_grid.append("<div class=\"container\">");for (_i=0;_i<=_rows.length-1;_i++) {_myrow=_rows[_i];_grid.append("<div id=\"" + _myrow._id + "\" class=\"row\">");for (_j=0;_j<=_myrow._cols.length-1;_j++) {_mycol=_myrow._cols[_j];_grid.append("<div id=\"" + _mycol._id + "\" class=\"" + _mycol._classes + "\"></div>");}_grid.append("</div>");}_grid.append("</div>");u(_targetid.toLowerCase()).html(_grid.toString());};this.content= function(_targetid,_id,_text) {if (self==null) self=this;u(_targetid.toLowerCase()).append(Mustache.render("<p id=\"" + _id.toLowerCase() + "\">"+_text+"</p>",{}));};this.header= function(_targetid,_id,_level,_text) {if (self==null) self=this;u(_targetid.toLowerCase()).append(Mustache.render("<h" + _level + " id=\"" + _id.toLowerCase() + "\">" + _text + "</h" + _level + ">",{}));};this.button= function(_targetid,_id,_text,_colorvariant,_eventhandler) {if (self==null) self=this;var _tgt;var _btn;_tgt=self.getelement(_targetid);_btn=_tgt.append(Mustache.render("<button id=\"" + _id.toLowerCase() + "\" class=\"" + _colorvariant + "\">" + _text + "</button>",{})).children().toU();if (_eventhandler!=null) {_btn[0].handle("mousedown, touchstart", function(event) {return _eventhandler["buttonclicked"](event)});}};this.getelement= function(_id) {if (self==null) self=this;_id = _id.toLowerCase();return u(_id);};this.image= function(_targetid,_id,_src,_alttext) {if (self==null) self=this;u(_targetid.toLowerCase()).html(Mustache.render("<img id=\"" + _id.toLowerCase() + "\" src=\"" + _src + "\" alt=\"" + _alttext + "\"/>",{}));};this.loginform= function(_targetid,_id,_eventhandler) {if (self==null) self=this;var _template;var _inp;_template="<form id=\"" + _id.toLowerCase() + "\"> \n  <fieldset> \n    <legend>Simple form</legend> \n	<div class=\"row\"> \n      <div class=\"col-sm-12 col-md-6\"> \n        <label for=\"username\">Username</label> \n        <input id=\"" + _id.toLowerCase() + "myusername\" type=\"text\" placeholder=\"Username\" class=\"inputkeys\"/> \n      </div> \n      <div class=\"col-sm-12 col-md-6\"> \n        <label for=\"password\">Password</label> \n        <input  id=\"" + _id.toLowerCase() + "mypassword\" type=\"password\" placeholder=\"Password\" class=\"inputkeys\"/> \n      </div> \n    </div> \n  </fieldset> \n</form>";u(_targetid.toLowerCase()).html(Mustache.render(_template,{}));_inp=u(".inputkeys");_inp.handle("keydown", function(event) {return _eventhandler["inp_keydown"](event)});_inp.handle("keyup", function(event) {return _eventhandler["inp_keyup"](event)});};}function banano_bananodemo_listview() {var self;this._items=[];this.initialize= function() {if (self==null) self=this;};this.additem= function(_item) {if (self==null) self=this;self._items.push(_item);};}function banano_bananodemo_listviewitem() {var self;this._text='';this.initialize= function() {if (self==null) self=this;self._text = "";};}function banano_bananodemo() {var self;this._myfirst= new banano_bananodemo_myfirstclass();this._mainvar="Mainvar";this._mqtt=null;this._sql=null;this._template1="<p>Very easy using HTML templates:<p><h1>{{firstName}} {{lastName}}</h1>Blog: {{blogURL}}";this._didinsert=false;this.singleresult= function(_lst,_fieldname) {if (self==null) self=this;var _rec;if (_lst!=null) {if (_lst.length>0) {_rec=_lst[0];return _rec[_fieldname];}}return "0";};this.banano_ready= function() {if (self==null) self=this;var _str;var _regexp1;var _regexp3;var _found;var _mymap;var _i;var _mylistview;var _counter;var _mylistviewitem;var _tmplist;var _mylvi;var _teststr;var _rows;var _v;var _s;var _conts;var _cont;var _k;var _r;var _jq;var _row2c1;var _clientid;var _ops;var _m;console.log(window["navigator"]["appName"]);_str="Visit Microsoft";_regexp1=null;_str = _str.replace(/microsoft/i,"B4X");console.log(_str);_str = "table football, foosball";_regexp3=null;_regexp3=new RegExp(/foo*/g);_found=(_foundRES=_regexp3.exec(_str), _foundRES == null) ? null: _foundRES[0];while (_found!=null) {console.log("Found "+_found+". Next starts at "+_regexp3.lastIndex);_found = (_foundRES=_regexp3.exec(_str), _foundRES == null) ? null: _foundRES[0];}_mymap={"January":1, "February":2};console.log(_mymap["January"]);for (_i=0;_i<=Object.keys(_mymap).length-1;_i++) {console.log(banano_getB4JKeyAt(_mymap,_i));console.log(banano_getB4JValueAt(_mymap,_i));}_mylistview= new banano_bananodemo_listview();_mylistview.initialize();for (_counter=0;_counter<=9;_counter++) {_mylistviewitem= new banano_bananodemo_listviewitem();_mylistviewitem.initialize();_mylistviewitem._text = "ListViewItem "+_counter;_mylistview.additem(_mylistviewitem);}_tmplist=_mylistview._items;for (var _mylviindex=0;_mylviindex<_tmplist.length;_mylviindex++) {_mylvi=_tmplist[_mylviindex];console.log(_mylvi._text);}for (var _mylviindex=0;_mylviindex<_mylistview._items.length;_mylviindex++) {_mylvi=_mylistview._items[_mylviindex];console.log(_mylvi._text);}_teststr="\""+"Hello there!"+"\t"+"after tab"+"\"";console.log(_teststr);self._myfirst.initialize("Alain is here!");self._sqlbananodb="bananodb";alasql.promise("CREATE INDEXEDDB DATABASE IF NOT EXISTS " + "bananodb" + ";").then(function(res){self.sql_sqlopened();}).catch(function(reason){self.sql_sqlexecuteerror("CREATEDB", reason);});_rows=_banano_bananodemo_minicss.addrows("r",6);_banano_bananodemo_minicss.addcolumns("c",_rows[0],3,"col-sm-4");_banano_bananodemo_minicss.addcolumns("c",_rows[1],1,"col-sm-12");_banano_bananodemo_minicss.addcolumns("c",_rows[2],1,"col-sm-12");_banano_bananodemo_minicss.addcolumns("c",_rows[3],3,"col-sm-4");_banano_bananodemo_minicss.addcolumns("c",_rows[4],1,"col-sm-4");_banano_bananodemo_minicss.addcolumns("c",_rows[5],1,"col-sm-12");_banano_bananodemo_minicss.buildgrid("#body",_rows);_v=["ala1","ala2"];for (var _sindex=0;_sindex<_v.length;_sindex++) {_s=_v[_sindex];console.log(_s);}_conts=u("#body").children().toU();for (var _contindex=0;_contindex<_conts.length;_contindex++) {_cont=_conts[_contindex];console.log("HasClass: "+_cont.hasClass("container"));_rows=_cont.children(".row").toU();for (_k=0;_k<=_rows.length-1;_k++) {_r=_rows[_k];console.log(_r.attr("id"));}}for (_k=0;_k<=_conts.length-1;_k++) {_cont=_conts[_k];console.log("Find .row: "+_cont.find(".row").toU().length);}_banano_bananodemo_minicss.header("#r1c1","hdr1",4,"HEADER");_banano_bananodemo_minicss.content("#r1c1","cont1","This is just some paragraph text to demonstate how BANano works");u("#r1c3").html(Mustache.render(self._template1,JSON.parse("{\"firstName\": \"Alain\", \"lastName\": \"Bailleul\", \"blogURL\": \"https://alwaysbusycorner.com/\"}")));_banano_bananodemo_minicss.button("#r2c1","btn1","PRESS ME","secondary",_banano_bananodemo);_banano_bananodemo_minicss.button("#r2c1","btn2","TEST jQuery","secondary",null);_jq=null;_jq=$;_jq("#btn2")["click"](function() {return _banano_bananodemo["Btn2_Clicked".toLowerCase()]()});_banano_bananodemo_minicss.loginform("#r3c1","loginform",_banano_bananodemo);_banano_bananodemo_minicss.image("#r4c1","image1","./assets/1.jpg","my image");_row2c1=u("#r2c1");console.log(_row2c1.css("background-color"));_row2c1.css(JSON.parse("{\"background-color\": \"red\"}"));console.log(_row2c1.css("background-color"));_row2c1.append("<div>test</div>").append("<div>test2</div>").append("<div>test3</div>");self.runme();_clientid="BananoMQTT"+(Math.floor(Math.random() * (9999999999 - 1) + 1));self._mqtt = new Paho.MQTT.Client("iot.eclipse.org",443,"/ws",_clientid);self._mqtt.onConnectionLost=function() {self.mqtt_disconnected();};self._mqtt.onMessageArrived=function(message) {self.mqtt_messagearrived(message.destinationName, message.payloadBytes);};var _mqtt_conn={onSuccess:function() {self.mqtt_connected(true);}, onFailure: function() {self.mqtt_connected(false);useSSL=true}};_ops={};_ops.userName="";_ops.password="";_ops.cleanSession=false;self._mqtt_conn=_ops;self._mqtt_conn.useSSL=true;self._mqtt_conn.onSuccess=function() {self.mqtt_connected(true);};self._mqtt_conn.onFailure=function() {self.mqtt_connected(false);};self._mqtt.connect(self._mqtt_conn);_m={"January":1, "February":2};console.log(_m["January"]);};this.btn2_clicked= function() {if (self==null) self=this;alert("btn2 clicked through BANanoObject and jQuery!");};this.banano_emailsent= function(_tag,_message) {if (self==null) self=this;console.log("Sent email with tag: "+_tag+": "+_message);};this.sql_sqlopened= function() {if (self==null) self=this;alasql("ATTACH INDEXEDDB DATABASE " + self._sqlbananodb + "; USE " + self._sqlbananodb + ";", function() {alasql.promise("CREATE TABLE IF NOT EXISTS flights (flightNo INT, fromCity STRING, toCity STRING, isInTheAir BOOL)").then(function(res){self.sql_sqlexecuteresult("CREATE",res);}).catch(function(reason){self.sql_sqlexecuteerror("CREATE", reason);});});};this.sql_sqlexecuteerror= function(_tag,_reason) {if (self==null) self=this;console.log("ERROR for TAG:"+_tag+" Reason:"+_reason);};this.sql_sqlexecuteresult= function(_tag,_result) {if (self==null) self=this;var _mycount;var _m;switch ("" + _tag) {case "" + "CREATE":alasql("ATTACH INDEXEDDB DATABASE " + self._sqlbananodb + "; USE " + self._sqlbananodb + ";", function() {alasql.promise("SELECT COUNT(*) AS myCount FROM flights;").then(function(res){self.sql_sqlexecuteresult("COUNT",res);}).catch(function(reason){self.sql_sqlexecuteerror("COUNT", reason);});});break;case "" + "COUNT":_mycount=0;if (_result.length>0) {_m=_result[0];_mycount = _m["myCount"];console.log("myCount: "+_mycount);}_mycount = _mycount+1;if (self._didinsert == false) {self._didinsert = true;alasql("ATTACH INDEXEDDB DATABASE " + self._sqlbananodb + "; USE " + self._sqlbananodb + ";", function() {alasql.promise("INSERT INTO flights (flightNo, fromcity, toCity, isInTheAir) VALUES (?, ?, ?, ?)", [_mycount,"Brussels","Paris",true]).then(function(res){self.sql_sqlexecuteresult("INSERT",res);}).catch(function(reason){self.sql_sqlexecuteerror("INSERT", reason);});});}break;case "" + "INSERT":alasql("ATTACH INDEXEDDB DATABASE " + self._sqlbananodb + "; USE " + self._sqlbananodb + ";", function() {alasql.promise("SELECT COUNT(*) AS myCount FROM flights;").then(function(res){self.sql_sqlexecuteresult("COUNT",res);}).catch(function(reason){self.sql_sqlexecuteerror("COUNT", reason);});});break;}};this.mqtt_connected= function(_success) {if (self==null) self=this;console.log("connected "+_success);if (_success) {var __mqtt_opts1={qos: 0};self._mqtt.subscribe("Banano/RCV",__mqtt_opts1);if (self._mqtt.clientId == "Alain") {console.log("It is Alain!");} else {console.log(self._mqtt.clientId);}}};this.mqtt_disconnected= function() {if (self==null) self=this;console.log("Disconnected");};this.mqtt_messagearrived= function(_topic,_payload) {if (self==null) self=this;var _json;var _m;var _barcode;console.log("mqtt_MessageArrived");_json={};_m={};_barcode=banano_bytesToString(_payload.slice(0,_payload.length));console.log(_topic);console.log(_barcode);if (_topic == "Banano/RCV") {_m["answer"]="OK";_json=_m;console.log(JSON.stringify(_json));self._mqtt.send("Banao/SND", JSON.stringify(_json));}};this.runme= function() {if (self==null) self=this;var _v;var _s;var _i;_v=["1","2","3"];for (var _sindex=0;_sindex<_v.length;_sindex++) {_s=_v[_sindex];console.log(_s);}for (_i=1;_i<=10;_i++) {console.log("Main: Hello World "+_i+"!");}_banano_bananodemo_shared.runme();console.log((!isNaN(parseFloat(15.3)) && isFinite(15.3)));};this.buttonclicked= function(_event) {if (self==null) self=this;var _i;console.log("Clicked on: "+_event.target.id);for (_i=0;_i<=_event.detail.length-1;_i++) {console.log(_event.detail[_i]);}banano_isconnected("ForAjaxCallFromButton",'banano_isconnectedresult', this);};this.banano_isconnectedresult= function(_tag,_result) {if (self==null) self=this;console.log("Internet for: "+_tag+" = "+_result);switch ("" + _tag) {case "" + "ForAjaxCallFromButton":if (_result) {callAjax("https://reqres.in/api/users?page=1","GET","jsonp", "","ID0001", false, 'banano_callajaxresult', this, null);} else {_banano_bananodemo_minicss.content("#r4c1","contajax","Cannot make Ajax call because you are not connected to the internet, but here is the last result:<br>"+_banano_bananodemo_shared._ajaxresult);}break;}};this.banano_callajaxresult= function(_success,_uniqueid,_result) {if (self==null) self=this;console.log(_success);console.log(_uniqueid);console.log(_result);_banano_bananodemo_shared._ajaxresult = _result;_banano_bananodemo_minicss.content("#r4c1","contajax",_result);};this.inp_keydown= function(_event) {if (self==null) self=this;console.log(_event.target.id+" Keydown: "+_event.key);};this.inp_keyup= function(_event) {if (self==null) self=this;console.log(_event.target.id+" KeyUp: "+_event.key);};} 
function evaluate(s) { 
    // so we get back a string 
   return '' + eval(s); 
} 
if ('serviceWorker' in navigator) {navigator.serviceWorker.register('./service-worker.js').then(function() { console.log('Service Worker Registered'); }).catch(function(err) {console.log('Service Worker needs https or localhost');});}_banano_bananodemo.banano_ready();